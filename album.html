<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memories Album üíñ</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        background: '#fff0f5', // Latar belakang pink sangat muda (Lavender Blush)
                        foreground: '#4a0420', // Teks warna maroon gelap agar kontras tapi lembut
                        primary: {
                            DEFAULT: '#ff69b4', // Hot Pink yang lebih cerah
                            foreground: '#ffffff'
                        },
                        secondary: '#ffe4e1', // Misty Rose untuk gradien
                        muted: {
                            DEFAULT: '#fce7f3',
                            foreground: '#db2777'
                        },
                        card: '#ffffff',
                    },
                    fontFamily: {
                        // Menggunakan font yang lebih "chunky" dan lucu untuk script
                        script: ['Pacifico', 'cursive', 'serif'],
                        sans: ['Quicksand', 'sans-serif'] // Font sans-serif yang membulat
                    },
                    boxShadow: {
                        // Bayangan pink yang lembut dan berpendar
                        'cute': '0 10px 30px -5px rgba(255, 105, 180, 0.3)',
                        'cute-hover': '0 20px 40px -5px rgba(255, 105, 180, 0.5)',
                    }
                }
            }
        }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        /* Custom Animations */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .animate-fade-in-up {
            animation: fadeInUp 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards; /* Efek membal (bouncy) */
            opacity: 0;
        }

        /* Floating Hearts Styles yang lebih lembut */
        .heart {
            position: fixed;
            font-size: 1.2rem;
            color: #ff69b4; /* Hot pink */
            user-select: none;
            pointer-events: none;
            /* Menggunakan text-shadow untuk efek outline putih agar lebih pop */
            text-shadow: 0 0 5px rgba(255,255,255,0.8);
            animation: floatUpBubble 5s ease-in-out infinite;
            z-index: 0;
            opacity: 0.7;
        }

        @keyframes floatUpBubble {
            0% { transform: translateY(100vh) scale(0.8) rotate(0deg); opacity: 0; }
            20% { opacity: 0.8; }
            50% { transform: translateY(50vh) scale(1.1) translateX(20px) rotate(180deg); }
            80% { opacity: 0.6; }
            100% { transform: translateY(-10vh) scale(0.8) translateX(-20px) rotate(360deg); opacity: 0; }
        }

        /* Hiasan latar belakang pola titik-titik samar */
        body {
            background-image: radial-gradient(circle, #ffdee9 2px, transparent 2px);
            background-size: 30px 30px;
        }
    </style>
</head>
<body class="font-sans antialiased text-foreground bg-background overflow-x-hidden">

    <main class="relative min-h-screen bg-gradient-to-b from-background via-secondary/50 to-background px-4 py-16">
        
        <div id="hearts-container" class="absolute inset-0 pointer-events-none overflow-hidden"></div>

        <div class="relative z-10 mx-auto max-w-5xl">
            <header class="text-center mb-12">
                <h1 class="font-script animate-fade-in-up mb-3 text-5xl text-primary sm:text-7xl drop-shadow-sm" style="animation-delay: 0ms;">
                    ‚ú® my Love photo albums ‚ú®
                </h1>
                <p class="text-lg text-muted-foreground font-semibold animate-fade-in-up flex items-center justify-center gap-2" style="animation-delay: 150ms;">
                    <!-- <span>üíå</span> Koleksi foto kenangan kita berdua <span>üíå</span> -->
                </p>
            </header>

            <div id="loading" class="text-center text-primary font-script text-2xl animate-bounce py-10">
                Sedang merajut kenangan... üíñ
            </div>

            <div id="error-msg" class="hidden text-center text-red-400 bg-red-50 border-2 border-red-200 p-6 rounded-[20px] font-semibold mx-auto max-w-md shadow-cute">
                Ups! Gagal memuat foto-foto lucu kita. Coba refresh ya! ü•∫
            </div>

            <div id="photo-grid" class="grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3 px-4 sm:px-0">
                </div>
            
            <footer class="mt-16 text-center text-sm text-muted-foreground font-semibold">
               Dibuat dengan banyak cinta (dan sedikit gula) untukmu. üç≠
            </footer>
        </div>

        <div id="lightbox" class="fixed inset-0 z-50 hidden bg-pink-900/80 backdrop-blur-sm flex items-center justify-center p-4 transition-all duration-500 opacity-0" aria-modal="true">
            <button onclick="closeLightbox()" class="absolute top-6 right-6 bg-white text-primary rounded-full p-2 hover:bg-primary hover:text-white transition-colors shadow-cute focus:outline-none z-10 transform hover:rotate-90 duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>

            <div class="relative max-w-4xl w-full flex flex-col items-center p-4 bg-white rounded-[30px] shadow-[0_0_50px_rgba(255,105,180,0.6)] transform scale-95 transition-all duration-300" id="lightbox-content">
                <div class="p-2 border-4 border-dashed border-primary/30 rounded-[24px] w-full h-full">
                    <img id="lightbox-img" src="" alt="Full view" class="max-h-[75vh] w-full object-contain rounded-[20px]">
                </div>
                <p id="lightbox-caption" class="mt-4 text-primary font-script text-3xl"></p>
            </div>
            
            <div class="absolute inset-0 -z-10 cursor-pointer" onclick="closeLightbox()"></div>
        </div>

    </main>

    <script>
        const API_URL = "https://pic.zackyhere.my.id/our-pic";
        const gridContainer = document.getElementById('photo-grid');
        const loadingElement = document.getElementById('loading');
        const errorElement = document.getElementById('error-msg');
        let photos = [];

        // --- 1. Fetch Data ---
        async function fetchPhotos() {
            try {
                const response = await fetch(API_URL);
                if (!response.ok) throw new Error('Network response was not ok');
                photos = await response.json();
                renderGallery();
            } catch (error) {
                console.error("Gagal mengambil foto:", error);
                loadingElement.classList.add('hidden');
                errorElement.classList.remove('hidden');
            }
        }

        // --- 2. Render Gallery Lucu ---
        function renderGallery() {
            loadingElement.classList.add('hidden');
            if (photos.length === 0) {
                gridContainer.innerHTML = '<div class="col-span-full text-center text-muted-foreground font-script text-2xl">Belum ada foto yang dipajang... üò¢</div>';
                return;
            }

            photos.forEach((photoUrl, index) => {
                const caption = `Memory No. ${index + 1}`;
                const delay = (index * 150) + 300;
                // Rotasi acak sedikit ke kiri atau kanan agar terlihat alami
                const randomRotate = Math.random() > 0.5 ? 'hover:rotate-3' : 'hover:-rotate-3';

                const button = document.createElement('button');
                // Container Luar: Bingkai putih tebal, sudut sangat bulat, bayangan pink lembut
                button.className = `group relative animate-fade-in-up cursor-pointer p-4 bg-white rounded-[28px] shadow-cute transition-all duration-500 hover:scale-105 ${randomRotate} hover:shadow-cute-hover w-full focus-visible:outline-none focus-visible:ring-4 focus-visible:ring-primary/50`;
                button.style.animationDelay = `${delay}ms`;
                button.onclick = () => openLightbox(index);
                button.setAttribute('aria-label', `Lihat ${caption}`);

                button.innerHTML = `
                    <div class="relative aspect-square w-full overflow-hidden rounded-[20px] border-4 border-dashed border-primary/40 p-1.5 bg-secondary/20">
                        <img
                            src="${photoUrl}"
                            alt="${caption}"
                            loading="lazy"
                            class="h-full w-full rounded-[16px] object-cover transition-transform duration-700 group-hover:scale-110"
                        />
                        <div class="absolute inset-0 flex items-center justify-center bg-primary/40 backdrop-blur-[2px] p-3 opacity-0 transition-all duration-300 group-hover:opacity-100 rounded-[20px]">
                            <span class="text-2xl font-script text-white drop-shadow-[0_2px_2px_rgba(0,0,0,0.3)] transform scale-90 transition-transform duration-300 group-hover:scale-110">
                                ${caption} üíñ
                            </span>
                        </div>
                    </div>
                    <div class="absolute top-1 left-2 text-xl opacity-80 transform -rotate-12">‚ú®</div>
                    <div class="absolute bottom-1 right-2 text-xl opacity-80 transform rotate-12">üå∏</div>
                `;

                gridContainer.appendChild(button);
            });
        }

        // --- 3. Lightbox Logic ---
        const lightbox = document.getElementById('lightbox');
        const lightboxContent = document.getElementById('lightbox-content');
        const lightboxImg = document.getElementById('lightbox-img');
        const lightboxCaption = document.getElementById('lightbox-caption');

        function openLightbox(index) {
            const url = photos[index];
            lightboxImg.src = url;
            lightboxCaption.textContent = `Memory No. ${index + 1} ü•∞`;
            
            lightbox.classList.remove('hidden');
            setTimeout(() => {
                lightbox.classList.remove('opacity-0');
                // Efek "pop" saat muncul
                lightboxContent.classList.remove('scale-95'); 
                lightboxContent.classList.add('scale-100');
            }, 50);
            document.body.style.overflow = 'hidden';
        }

        function closeLightbox() {
            lightbox.classList.add('opacity-0');
            lightboxContent.classList.remove('scale-100');
            lightboxContent.classList.add('scale-95');
            setTimeout(() => {
                lightbox.classList.add('hidden');
                lightboxImg.src = '';
            }, 500); // Disesuaikan dengan duration-500
            document.body.style.overflow = 'auto';
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && !lightbox.classList.contains('hidden')) closeLightbox();
        });

        // --- 4. Floating Hearts Logic (Lebih Bervariasi) ---
        function createHeart() {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            const emojis = ['‚ù§', 'üíñ', 'üíï', 'ü•∞', 'üå∏', '‚ú®', 'üéÄ'];
            heart.innerText = emojis[Math.floor(Math.random() * emojis.length)];
            
            heart.style.left = Math.random() * 100 + 'vw';
            // Ukuran lebih bervariasi
            const size = (Math.random() * 1.5 + 0.8);
            heart.style.fontSize = size + 'rem';
            
            // Durasi dan delay acak agar alaminya
            const duration = (Math.random() * 5 + 5) + 's';
            heart.style.animationDuration = duration;
            heart.style.animationDelay = (Math.random() * 2) + 's';
            
            document.getElementById('hearts-container').appendChild(heart);
            
            setTimeout(() => {
                heart.remove();
            }, parseFloat(duration) * 1000 + 2000);
        }

        fetchPhotos();
        // Munculkan hati lebih sering tapi dengan delay awal acak
        setInterval(createHeart, 700); 
        for(let i=0; i<5; i++) createHeart(); // Munculkan beberapa langsung di awal

    </script>
</body>
</html>
